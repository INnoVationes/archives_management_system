{% extends 'base_page/base_main.html' %}
{% import "bootstrap/wtf.html" as wtf %}

{% block head %}
    <title> 档案管理 | 档案管理系统 </title>
    <link href="/static/Admin/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/Admin/font-awesome/css/font-awesome.css" rel="stylesheet">
    <link href="/static/Admin/css/plugins/footable/footable.core.css" rel="stylesheet">
    <link href="/static/Admin/css/animate.css" rel="stylesheet">
    <link href="/static/Admin/css/style.css" rel="stylesheet">
{% endblock %}

{% block page_content %}
    <div class="row wrapper border-bottom white-bg page-heading">
        <div class="col-lg-10">
            <h2>{{ type }}</h2>
            {% for message in get_flashed_messages() %}
                <div class="alert alert-warning">
                    <button type="button" class="close" data-dismiss="alert">&times;</button>
                    {{ message }}
                </div>
            {% endfor %}
        </div>
        <div class="col-lg-2">
        </div>
    </div>
    <div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                {% if view==0 %}
                    <div class="ibox-title">
                        <h3>
                            输入约束条件
                        </h3>
                    </div>
                    <div class="ibox-content">
                    <form method="post" class="form-horizontal">
                        {{ form.csrf_token }}
                        <div class="form-group"><label class="col-sm-2 control-label">性别</label>
                            <div class="col-sm-10">
                                {{ form.sex(class="form-control") }}
                            </div>
                        </div>
                        <div class="hr-line-dashed"></div>
                        <div class="form-group"><label class="col-sm-2 control-label">年级</label>
                            <div class="col-sm-10">
                                <input id='grade' name="grade" type="text" class="form-control"
                                       data-mask="9999" placeholder="">
                            </div>
                        </div>
                        <div class="hr-line-dashed"></div>
                        <div class="form-group"><label class="col-sm-2 control-label">政治面貌</label>
                            <div class="col-sm-10">
                                {{ form.political_status(class="form-control") }}
                            </div>
                        </div>
                        <div class="hr-line-dashed"></div>
                        <div class="form-group"><label class="col-sm-2 control-label">专业</label>
                            <div class="col-sm-10">
                                {{ form.academy(class="form-control") }}
                            </div>
                        </div>
                        <div class="hr-line-dashed"></div>
                        <div align="right">
                            {{ form.submit(class="btn btn-primary block m-b btnn") }}
                        </div>
                    </form>
                {% elif view==1 %}
                    <div class="ibox-title">
                        <h3>
                            输入要修改的属性
                        </h3>
                    </div>
                    <div class="ibox-content">
                    <form method="post" class="form-horizontal">
                        {{ form.csrf_token }}
                        <div class="form-group"><label class="col-sm-2 control-label">政治面貌</label>
                            <div class="col-sm-10">
                                {{ form.political_status_2(class="form-control") }}
                            </div>
                        </div>
                        <div class="hr-line-dashed"></div>
                        <div class="form-group"><label class="col-sm-2 control-label">档案状态</label>
                            <div class="col-sm-10">
                                {{ form.status_2(class="form-control") }}
                            </div>
                        </div>
                        <div class="hr-line-dashed"></div>
                        <div align="right">
                            {{ form.alter(class="btn btn-primary block m-b btnn") }}
                        </div>
                    </form>
                    <h2>满足条件的档案</h2>
                    <table class="footable table table-stripped toggle-arrow-tiny" data-page-size="30">
                        <thead>
                        <tr>
                            <th data-toggle="true">学号</th>
                            <th>姓名</th>
                            <th>性别</th>
                            <th>学院</th>
                            <th>年级</th>
                            <th>政治面貌</th>
                            <th data-hide="all">年龄</th>
                            <th data-hide="all">出生日期</th>
                            <th data-hide="all">家庭住址</th>
                            <th data-hide="all">入学日期</th>
                            <th>档案状态</th>
                            <th>档案管理</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% include '_archive_table.html' %}
                        </tbody>
                        <tfoot>
                        <tr>
                            <td colspan="5">
                                <ul class="pagination pull-right"></ul>
                            </td>
                        </tr>
                        </tfoot>
                    </table>
                {% endif %}
                </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
    <script src="/static/Admin/js/jquery-2.1.1.js"></script>
    <script src="/static/Admin/js/bootstrap.min.js"></script>
    <script src="/static/Admin/js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="/static/Admin/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
    <script src="/static/Admin/js/plugins/footable/footable.all.min.js"></script>
    <script src="/static/Admin/js/inspinia.js"></script>
    <script src="/static/Admin/js/plugins/pace/pace.min.js"></script>
{% endblock %}